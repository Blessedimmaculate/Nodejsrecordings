doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Sales Records Management
    link(rel="stylesheet" href="/css/sales.css")
  body
    .container.d-flex.justify-content-center.align-items-center.min-vh-100
      .row.justify-content-center
        .col-md-6
          .edit-sale-form.p-4
            h2.text-center.mb-4 Edit Sale
            //- Check if sale exists before rendering the form
            if sale
              form#edit-sale-form(action='/updateSale?id='+sale._id method='POST')
                .mb-3
                  label.form-label(for='nproduce') Produce Name
                  select#nproduce.form-control(name='produceName')
                    option(value=sale.produceName.produceName selected) #{sale.produceName.produceName}
                  small#pnameErr.text-danger
                .mb-3
                  label.form-label(for='tonnage') Tonnage (Kgs)
                  input#tonnage.form-control(type='number' name='saleTonnage' value=sale.saleTonnage required)
                  small#tonnageErr.text-danger
                .mb-3
                  label.form-label(for='amount') Amount Paid (UGX)
                  input#amount.form-control(type='number' name='amount' value=sale.amount required)
                  small#amountErr.text-danger
                .mb-3
                  label.form-label(for='buyername') Buyer's Name
                  input#buyername.form-control(type='text' name='buyerName' value=sale.buyerName required)
                  small#buyernameErr.text-danger
                //- .mb-3
                //-   label.form-label(for='salesAgent') Sales Agent
                //-   select#salesAgent.form-control(name='salesAgent')
                //-     if agents.length
                //-       each agent in agents
                //-         option(value=agent._id selected=(agent._id.toString() === sale.salesAgent?.._id?.toString())) #{agent.username}
                //-   small#salesAgentErr.text-danger
                .mb-3
                  label.form-label(for='dateofpurchase') Date of Sale
                  input#dateofpurchase.form-control(type='date' name='saledate' value=sale.saledate.toISOString().split('T')[0] required)
                  small#dateofpurchaseErr.text-danger
                .text-center
                  button.btn.btn-primary(type='submit') Update Sale
            else
              p.text-danger.text-center Sale data is not available.
